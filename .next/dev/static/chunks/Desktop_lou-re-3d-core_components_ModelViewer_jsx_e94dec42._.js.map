{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mauriciomendoza/Desktop/lou-re-3d-core/components/ModelViewer.jsx"],"sourcesContent":["import { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\n\nconst FLOOR_Y = 0;\nconst LAYOUT_KEY = \"lou-re-furniture-layout-v1\";\nconst ROOM_ID = \"demo-room-1\"; // later you can make this dynamic per room/upload\n\nexport default function ModelViewer({ file }) {\n  const containerRef = useRef(null);\n  const furnitureHelpersRef = useRef({\n    addSofa: null,\n    addTable: null,\n    addPlant: null,\n    clearFurniture: null,\n    saveCloud: null,\n    loadCloud: null,\n  });\n  const furnitureGroupRef = useRef(null);\n  const controlsRef = useRef(null);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    // --- basic sizes based on container, not whole window ---\n    const width = container.clientWidth || window.innerWidth;\n    const height = container.clientHeight || window.innerHeight;\n\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color(0x111111);\n\n    const camera = new THREE.PerspectiveCamera(50, width / height, 0.1, 1000);\n    camera.position.set(0, 1.6, 4); // ~human height\n\n    const renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(width, height);\n    container.appendChild(renderer.domElement);\n\n    const ambientLight = new THREE.AmbientLight(0xffffff, 1.2);\n    scene.add(ambientLight);\n\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 3);\n    directionalLight.position.set(5, 10, 7);\n    scene.add(directionalLight);\n\n    const furnitureGroup = new THREE.Group();\n    scene.add(furnitureGroup);\n    furnitureGroupRef.current = furnitureGroup;\n\n    let roomCenter = new THREE.Vector3(0, 0, 0);\n    const ROTATION_STEP = Math.PI / 16;\n\n    const raycaster = new THREE.Raycaster();\n    const pointer = new THREE.Vector2();\n    const dragPlane = new THREE.Plane(new THREE.Vector3(0, 1, 0), -FLOOR_Y);\n    let selectedFurniture = null;\n    let isDragging = false;\n\n    // -----------------------\n    // Layout helpers\n    // -----------------------\n    function getCurrentLayout() {\n      if (!furnitureGroupRef.current) return [];\n      return furnitureGroupRef.current.children\n        .map((child) => {\n          const type = child.userData?.furnitureType;\n          if (!type) return null;\n          return {\n            type,\n            position: child.position.toArray(),\n            rotation: [child.rotation.x, child.rotation.y, child.rotation.z],\n          };\n        })\n        .filter(Boolean);\n    }\n\n    function saveFurnitureLayout() {\n      if (\n        typeof window === \"undefined\" ||\n        !furnitureGroupRef.current ||\n        !window.localStorage\n      )\n        return;\n      const layout = getCurrentLayout();\n      try {\n        window.localStorage.setItem(LAYOUT_KEY, JSON.stringify(layout));\n      } catch (err) {\n        console.warn(\"Failed to save layout\", err);\n      }\n    }\n\n    function createFurnitureMesh(type) {\n      let mesh = null;\n      if (type === \"sofa\") {\n        const height = 0.7;\n        mesh = new THREE.Mesh(\n          new THREE.BoxGeometry(1.5, height, 0.6),\n          new THREE.MeshStandardMaterial({\n            color: 0x6cb2ff,\n            roughness: 0.4,\n          })\n        );\n        mesh.userData.floorOffset = height / 2;\n      } else if (type === \"table\") {\n        const height = 0.4;\n        mesh = new THREE.Mesh(\n          new THREE.BoxGeometry(0.9, height, 0.9),\n          new THREE.MeshStandardMaterial({\n            color: 0xffd37a,\n            roughness: 0.3,\n          })\n        );\n        mesh.userData.floorOffset = height / 2;\n      } else if (type === \"plant\") {\n        const potHeight = 0.35;\n        const pot = new THREE.Mesh(\n          new THREE.CylinderGeometry(0.2, 0.25, potHeight, 20),\n          new THREE.MeshStandardMaterial({ color: 0xa66a3d })\n        );\n        pot.position.y = potHeight / 2;\n        const leaves = new THREE.Mesh(\n          new THREE.ConeGeometry(0.4, 0.8, 24),\n          new THREE.MeshStandardMaterial({ color: 0x4ade80 })\n        );\n        leaves.position.y = potHeight + 0.4;\n        mesh = new THREE.Group();\n        mesh.add(pot);\n        mesh.add(leaves);\n        mesh.userData.floorOffset = FLOOR_Y;\n      }\n      if (mesh) {\n        mesh.userData.furnitureType = type;\n        const floorY = FLOOR_Y + (mesh.userData.floorOffset || 0);\n        mesh.position.y = floorY;\n        mesh.userData.floorY = floorY;\n      }\n      return mesh;\n    }\n\n    function getDefaultPosition(type) {\n      if (type === \"sofa\") {\n        return new THREE.Vector3(roomCenter.x - 0.6, FLOOR_Y, roomCenter.z);\n      }\n      if (type === \"table\") {\n        return new THREE.Vector3(roomCenter.x + 0.4, FLOOR_Y, roomCenter.z);\n      }\n      if (type === \"plant\") {\n        return new THREE.Vector3(roomCenter.x, FLOOR_Y, roomCenter.z + 0.7);\n      }\n      return roomCenter.clone();\n    }\n\n    function spawnFurniture(type, options = {}) {\n      if (!furnitureGroupRef.current) return null;\n      const mesh = createFurnitureMesh(type);\n      if (!mesh) return null;\n\n      const position = options.position\n        ? new THREE.Vector3(...options.position)\n        : getDefaultPosition(type);\n      mesh.position.x = position.x;\n      mesh.position.z = position.z;\n      mesh.position.y =\n        options.position?.[1] ??\n        (mesh.userData.floorY ?? FLOOR_Y + (mesh.userData.floorOffset || 0));\n\n      if (options.rotation) {\n        mesh.rotation.set(\n          options.rotation[0],\n          options.rotation[1],\n          options.rotation[2]\n        );\n      }\n\n      furnitureGroupRef.current.add(mesh);\n      return mesh;\n    }\n\n    function removeFurniture(mesh) {\n      if (!mesh || !furnitureGroupRef.current) return;\n      furnitureGroupRef.current.remove(mesh);\n      mesh.traverse?.((obj) => {\n        if (obj.isMesh) {\n          obj.geometry?.dispose?.();\n          if (Array.isArray(obj.material)) {\n            obj.material.forEach((mat) => mat?.dispose?.());\n          } else {\n            obj.material?.dispose?.();\n          }\n        }\n      });\n      mesh.geometry?.dispose?.();\n      if (Array.isArray(mesh.material)) {\n        mesh.material.forEach((mat) => mat?.dispose?.());\n      } else {\n        mesh.material?.dispose?.();\n      }\n    }\n\n    function clearFurniture() {\n      if (!furnitureGroupRef.current) return;\n      const group = furnitureGroupRef.current;\n      while (group.children.length) {\n        removeFurniture(group.children[0]);\n      }\n      saveFurnitureLayout();\n    }\n\n    function loadFurnitureLayout() {\n      if (typeof window === \"undefined\" || !window.localStorage) return;\n      try {\n        const raw = window.localStorage.getItem(LAYOUT_KEY);\n        if (!raw) return;\n        const layout = JSON.parse(raw);\n        layout.forEach((item) => {\n          const mesh = spawnFurniture(item.type, {\n            position: item.position,\n            rotation: item.rotation,\n          });\n          if (mesh) {\n            mesh.userData.floorY =\n              item.position?.[1] ??\n              (mesh.userData.floorY ||\n                FLOOR_Y + (mesh.userData.floorOffset || 0));\n          }\n        });\n      } catch (err) {\n        console.warn(\"Failed to load layout\", err);\n      }\n    }\n\n    // -----------------------\n    // Cloud save/load helpers\n    // -----------------------\n    async function saveLayoutToCloud() {\n      try {\n        const layout = getCurrentLayout();\n        await fetch(\"/api/save-layout\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            room_id: ROOM_ID,\n            layout,\n          }),\n        });\n        // optional: also keep local copy in localStorage\n        saveFurnitureLayout();\n        alert(\"Layout saved to cloud ‚úÖ\");\n      } catch (err) {\n        console.error(\"Failed to save layout to cloud\", err);\n        alert(\"Error saving layout to cloud\");\n      }\n    }\n\n    async function loadLayoutFromCloud() {\n      try {\n        const res = await fetch(\n          `/api/load-layout?room_id=${encodeURIComponent(ROOM_ID)}`\n        );\n        if (!res.ok) {\n          console.error(\"Cloud load failed\", await res.text());\n          alert(\"Error loading layout from cloud\");\n          return;\n        }\n        const data = await res.json();\n        if (!data.layout) {\n          alert(\"No saved layout found in cloud yet\");\n          return;\n        }\n\n        clearFurniture();\n        data.layout.forEach((item) => {\n          spawnFurniture(item.type, {\n            position: item.position,\n            rotation: item.rotation,\n          });\n        });\n\n        saveFurnitureLayout(); // sync to local\n        alert(\"Layout loaded from cloud ‚úÖ\");\n      } catch (err) {\n        console.error(\"Failed to load layout from cloud\", err);\n        alert(\"Error loading layout from cloud\");\n      }\n    }\n\n    // expose helpers to React buttons\n    furnitureHelpersRef.current = {\n      addSofa: () => {\n        const mesh = spawnFurniture(\"sofa\");\n        if (mesh) saveFurnitureLayout();\n      },\n      addTable: () => {\n        const mesh = spawnFurniture(\"table\");\n        if (mesh) saveFurnitureLayout();\n      },\n      addPlant: () => {\n        const mesh = spawnFurniture(\"plant\");\n        if (mesh) saveFurnitureLayout();\n      },\n      clearFurniture,\n      saveCloud: saveLayoutToCloud,\n      loadCloud: loadLayoutFromCloud,\n    };\n\n    // -----------------------\n    // Controls & model loading\n    // -----------------------\n    const controls = new OrbitControls(camera, renderer.domElement);\n    controlsRef.current = controls;\n    controls.enableDamping = true;\n    controls.dampingFactor = 0.05;\n    controls.enablePan = true;\n    controls.maxPolarAngle = Math.PI / 2.05;\n    controls.minDistance = 1;\n    controls.maxDistance = 50;\n\n    const loader = new GLTFLoader();\n    loader.load(\n      file,\n      (gltf) => {\n        gltf.scene.scale.set(1, 1, 1);\n        gltf.scene.position.set(0, 0, 0);\n        scene.add(gltf.scene);\n\n        const box = new THREE.Box3().setFromObject(gltf.scene);\n        const size = box.getSize(new THREE.Vector3()).length();\n        const center = box.getCenter(new THREE.Vector3());\n        roomCenter = center.clone();\n\n        controls.target.copy(center);\n        camera.position.set(\n          center.x + size * 0.6,\n          center.y + size * 0.3, // eye-ish height\n          center.z + size * 0.6\n        );\n        camera.lookAt(center);\n\n        // once the room is loaded, restore any saved furniture\n        loadFurnitureLayout();\n      },\n      (xhr) => {\n        if (xhr.total) {\n          const percent = ((xhr.loaded / xhr.total) * 100).toFixed(1);\n          console.log(`Loading model: ${percent}%`);\n        }\n      },\n      (error) => {\n        console.error(\"Failed to load GLB model:\", error);\n        // still try to load layout in case we want to handle fallback later\n        loadFurnitureLayout();\n      }\n    );\n\n    // -----------------------\n    // Interaction handlers\n    // -----------------------\n    const handleResize = () => {\n      const newWidth = container.clientWidth || window.innerWidth;\n      const newHeight = container.clientHeight || window.innerHeight;\n      camera.aspect = newWidth / newHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(newWidth, newHeight);\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n\n    function updatePointer(event) {\n      const rect = renderer.domElement.getBoundingClientRect();\n      pointer.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n      pointer.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n    }\n\n    function findFurnitureRoot(object) {\n      let current = object;\n      while (current) {\n        if (current.userData?.furnitureType) return current;\n        current = current.parent;\n      }\n      return null;\n    }\n\n    const handlePointerDown = (event) => {\n      if (!furnitureGroupRef.current) return;\n      updatePointer(event);\n      raycaster.setFromCamera(pointer, camera);\n      const intersects = raycaster.intersectObjects(\n        furnitureGroupRef.current.children,\n        true\n      );\n      if (intersects.length > 0) {\n        const root = findFurnitureRoot(intersects[0].object);\n        if (root) {\n          selectedFurniture = root;\n          isDragging = true;\n          controls.enabled = false;\n        } else {\n          selectedFurniture = null;\n          isDragging = false;\n        }\n      } else {\n        selectedFurniture = null;\n        isDragging = false;\n      }\n    };\n\n    const handlePointerMove = (event) => {\n      if (!isDragging || !selectedFurniture) return;\n      updatePointer(event);\n      raycaster.setFromCamera(pointer, camera);\n      const intersectionPoint = new THREE.Vector3();\n      if (raycaster.ray.intersectPlane(dragPlane, intersectionPoint)) {\n        selectedFurniture.position.x = intersectionPoint.x;\n        selectedFurniture.position.z = intersectionPoint.z;\n        const floorY = selectedFurniture.userData?.floorY;\n        if (typeof floorY === \"number\") {\n          selectedFurniture.position.y = floorY;\n        }\n      }\n    };\n\n    const endDrag = () => {\n      if (!isDragging) return;\n      isDragging = false;\n      controls.enabled = true;\n      if (selectedFurniture) {\n        saveFurnitureLayout();\n      }\n    };\n\n    const handlePointerUp = () => {\n      endDrag();\n    };\n\n    const handlePointerLeave = () => {\n      endDrag();\n    };\n\n    const handleKeyDown = (event) => {\n      if (\n        (event.key === \"Delete\" || event.key === \"Backspace\") &&\n        selectedFurniture\n      ) {\n        removeFurniture(selectedFurniture);\n        selectedFurniture = null;\n        saveFurnitureLayout();\n        return;\n      }\n\n      const rotateLeft =\n        event.key === \"q\" ||\n        event.key === \"Q\" ||\n        event.key === \"ArrowLeft\";\n      const rotateRight =\n        event.key === \"e\" ||\n        event.key === \"E\" ||\n        event.key === \"ArrowRight\";\n\n      if (selectedFurniture && (rotateLeft || rotateRight)) {\n        const delta = rotateLeft ? -ROTATION_STEP : ROTATION_STEP;\n        selectedFurniture.rotation.y += delta;\n        saveFurnitureLayout();\n        return;\n      }\n\n      if (\n        (event.key === \"l\" || event.key === \"L\") &&\n        (event.metaKey || event.ctrlKey) &&\n        event.shiftKey\n      ) {\n        const layout = getCurrentLayout();\n        const json = JSON.stringify(layout, null, 2);\n        console.log(\"[Lou-re] furniture layout:\\n\", json);\n        if (navigator?.clipboard?.writeText) {\n          navigator.clipboard.writeText(json).catch(() => {});\n        }\n        event.preventDefault();\n      }\n    };\n\n    renderer.domElement.addEventListener(\"pointerdown\", handlePointerDown);\n    renderer.domElement.addEventListener(\"pointermove\", handlePointerMove);\n    renderer.domElement.addEventListener(\"pointerup\", handlePointerUp);\n    renderer.domElement.addEventListener(\"pointerleave\", handlePointerLeave);\n    window.addEventListener(\"keydown\", handleKeyDown);\n\n    let animationFrame;\n    const animate = () => {\n      controls.update();\n      renderer.render(scene, camera);\n      animationFrame = requestAnimationFrame(animate);\n    };\n    animate();\n\n    return () => {\n      cancelAnimationFrame(animationFrame);\n      window.removeEventListener(\"resize\", handleResize);\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      renderer.domElement.removeEventListener(\"pointerdown\", handlePointerDown);\n      renderer.domElement.removeEventListener(\"pointermove\", handlePointerMove);\n      renderer.domElement.removeEventListener(\"pointerup\", handlePointerUp);\n      renderer.domElement.removeEventListener(\n        \"pointerleave\",\n        handlePointerLeave\n      );\n      controls.dispose();\n      renderer.dispose();\n      if (container && container.contains(renderer.domElement)) {\n        container.removeChild(renderer.domElement);\n      }\n      clearFurniture();\n      furnitureHelpersRef.current = {\n        addSofa: null,\n        addTable: null,\n        addPlant: null,\n        clearFurniture: null,\n        saveCloud: null,\n        loadCloud: null,\n      };\n      furnitureGroupRef.current = null;\n    };\n  }, [file]);\n\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100vh\",\n        overflow: \"hidden\",\n        background: \"#000\",\n      }}\n    >\n      <div\n        ref={containerRef}\n        style={{\n          width: \"100%\",\n          height: \"100%\",\n          overflow: \"hidden\",\n          background: \"#000\",\n          cursor: \"grab\",\n        }}\n      />\n      <div\n        className=\"louref-toolbar\"\n        style={{\n          position: \"absolute\",\n          right: \"16px\",\n          top: \"80px\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: \"8px\",\n          padding: \"12px\",\n          borderRadius: \"12px\",\n          background: \"rgba(10, 10, 10, 0.9)\",\n          color: \"#fff\",\n          fontSize: \"13px\",\n          maxWidth: \"240px\",\n          zIndex: 10,\n        }}\n      >\n        <div style={{ fontWeight: 600, marginBottom: \"4px\" }}>\n          Furniture tools\n        </div>\n        <div style={{ opacity: 0.8, marginBottom: \"8px\" }}>\n          Click to drop furniture. Click an item to select, drag to move, use\n          Q/E or ‚Üê/‚Üí to rotate, press Delete to remove, and press Ctrl/‚åò + Shift\n          + L to copy layout JSON.\n        </div>\n        <button\n          onClick={() => furnitureHelpersRef.current.addSofa?.()}\n          style={toolbarButtonStyle}\n        >\n          + Add sofa (box)\n        </button>\n        <button\n          onClick={() => furnitureHelpersRef.current.addTable?.()}\n          style={toolbarButtonStyle}\n        >\n          + Add table (box)\n        </button>\n        <button\n          onClick={() => furnitureHelpersRef.current.addPlant?.()}\n          style={toolbarButtonStyle}\n        >\n          + Add plant (cylinder + cone)\n        </button>\n\n        <hr style={{ borderColor: \"#333\", margin: \"6px 0\" }} />\n\n        <button\n          onClick={() => furnitureHelpersRef.current.saveCloud?.()}\n          style={toolbarButtonStyle}\n        >\n          üíæ Save layout to cloud\n        </button>\n        <button\n          onClick={() => furnitureHelpersRef.current.loadCloud?.()}\n          style={toolbarButtonStyle}\n        >\n          ‚òÅÔ∏è Load layout from cloud\n        </button>\n\n        <button\n          onClick={() => furnitureHelpersRef.current.clearFurniture?.()}\n          style={{\n            ...toolbarButtonStyle,\n            marginTop: \"4px\",\n            border: \"1px solid #555\",\n            background: \"#220000\",\n            color: \"#ffb3b3\",\n          }}\n        >\n          Clear all furniture\n        </button>\n      </div>\n    </div>\n  );\n}\n\nconst toolbarButtonStyle = {\n  padding: \"6px 10px\",\n  borderRadius: \"8px\",\n  border: \"1px solid #333\",\n  background: \"#111\",\n  color: \"#fff\",\n  cursor: \"pointer\",\n  textAlign: \"left\",\n};"],"names":[],"mappings":"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"}}]
}